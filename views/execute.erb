<!DOCTYPE html>
<html lang="en">
    <head>
        <title>LODQA : Question-Answering over Linked Open Data</title>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
    </head>
    <body>
        <div id="pgp"><%= @pgp.to_json %></div>
        <div id="mappings"><%= @mappings.to_json %></div>
        <div id="target"><%= @target %></div>
    </body>
    <script type="text/javascript">
      const pgp = JSON.parse(document.querySelector('#pgp').innerHTML)
      const mappings = JSON.parse(document.querySelector('#mappings').innerHTML)
      const config = document.querySelector('#target').innerHTML
      const ws = new WebSocket(`ws://${location.host}/solutions?target=${config}`)
      ws.onopen = (event) => {
        event.target.send(JSON.stringify({
          pgp,
          mappings
        }))
      }
      ws.onmessage = (message) => {
        console.log(message);
      }
    </script>
</html>
